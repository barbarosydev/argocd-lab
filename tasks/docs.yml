version: '3'

tasks:
  serve:
    desc: Serve documentation with live reload
    silent: true
    cmds:
      - |
          echo "[docs] Serving at http://localhost:8000"
          uv run --project docs mkdocs serve --livereload --watch docs

  build:
    desc: Build static documentation
    silent: true
    cmds:
      - |
          echo "[docs] Building site"
          uv run --project docs mkdocs build
          echo "[docs] Output: site/"

  clean:
    desc: Clean documentation artifacts
    silent: true
    cmds:
      - |
          rm -rf site docs/site .venv docs/.venv
          find docs -type d -name __pycache__ -exec rm -rf {} + 2>/dev/null || true
          echo "[docs] Cleaned"

  deploy:
    desc: Deploy documentation to GitHub Pages
    silent: true
    cmds:
      - |
          echo "[docs] Deploying to GitHub Pages"
          uv run --project docs mkdocs gh-deploy --clean --message "docs update documentation [skip ci]"
