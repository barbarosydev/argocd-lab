version: '3'

tasks:
  bootstrap:
    desc: "ðŸ”„ Deploy/upgrade Argo CD"
    silent: true
    deps:
      - task: :_check-cluster
    cmds:
      - ./scripts/argocd.sh bootstrap --namespace {{.ARGOCD_NAMESPACE}} --values {{.ARGO_VALUES}} --port {{.ARGOCD_PORT}}

  password:
    desc: "ðŸ”„ Get admin password"
    silent: true
    deps:
      - task: :_check-cluster
    cmds:
      - ./scripts/argocd.sh password --namespace {{.ARGOCD_NAMESPACE}}

  ui:
    desc: "ðŸ”„ Open UI in browser"
    silent: true
    deps:
      - task: :_check-cluster
    cmds:
      - ./scripts/argocd.sh ui --port {{.ARGOCD_PORT}}
